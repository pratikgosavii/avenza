{% extends "partials/adminBase.html" %}
{% load static %}

{% block title %}Vendor Profile{% endblock title %}

{% block content %}

<div class="main-content">
    <div class="page-content">
        <div class="container-fluid">


<div class="container mt-5" >
    <div class="row">
        <!-- Left Profile Image -->
        <div class="col-md-3 text-center">
            <div class="card p-3">
                <img src="{{ vendor.image }}" class="profile-image" alt="Profile Image" />
                
                

                <h5 class="mt-3">{{ vendor.user.first_name }}</h5>
                <p class="text-muted">Vendor</p>
                <a href="{{ vendor.portfolio_link }}" style="color: blue !important;" title="Click me" target="_blank" rel="noopener noreferrer">
                    <p class="text-muted" style="color: blue !important;" >Portfolio Link</p>
                </a>
                
            </div>
        </div>

        <!-- Personal Information -->
        <div class="col-md-9">
            <div class="card p-4 personal-info">
                <h3 class="mb-6 text-center">Personal Information</h3>
                <div class="row mb-2">
                    <div class="col-md-6">
                        <p><strong>Username:</strong> {{ vendor.user.username }}</p>
                        <p><strong>Email:</strong> {{ vendor.user.email }}</p>
                        <p><strong>Phone:</strong> {{ vendor.vendorPhoneNumber }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Address:</strong> {{ vendor.user.address_line_1|default:"Not Provided" }}</p>
                        <p><strong>Location:</strong> {{ vendor.location }}</p>
                        <p><strong>Categories:</strong>
                            {% for category in vendor.category %}
                                {{ category }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    </div>
                </div>
                <div class="row text-center">
                    <div class="col-md-4 stats">
                        <h3>{{ orders|length }}</h3>
                        <p>Total Orders</p>
                    </div>
                    <div class="col-md-4 stats">
                        <h3>{{ orders|length }}</h3> <!-- Assume all orders are completed -->
                        <p>Completed Orders</p>
                    </div>
                    <div class="col-md-4 stats rating">
                        <td class="rating">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-half"></i>
                            <i class="bi bi-star"></i>
                        </td>
                        <p>Rating</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Past Orders Table -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card p-4">
                <h4 class="mb-3">Past Orders</h4>
                <div class="table-responsive">
                    <table class="table table-bordered table-striped text-center">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Package Name</th>
                                <th>Category</th>
                                <th>Date</th>
                                <th>Location</th>
                                <th>Status</th>
                                <th>Total Amount</th>
                                <th>Rating</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in orders %}
                            <tr>
                                <td>{{ order.id }}</td>
                                <td>{{ order.package_name }}</td>
                                <td>{{ order.category }}</td>
                                <td>{{ order.date }}</td>
                                <td>{{ order.location }}</td>
                                <td>{{ order.status }}</td>
                                <td>${{ order.total_amount }}</td>
                                <td>{{ order.rating }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
        </div>
    </div>
</div>
{% endblock content %}


{% block extra_js %}


<script>


function displaySelectedImages() {
    const input = document.getElementById("image_vendor");
    const selectedImagesContainer = document.getElementById("selectedImages");
    selectedImagesContainer.innerHTML = ""; // Clear previously displayed images

    Array.from(input.files).forEach((file) => {
      if (file.type.startsWith("image/")) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const imageDiv = document.createElement("div");
          imageDiv.style.position = "relative";
          const img = document.createElement("img");
          img.src = event.target.result;
          img.alt = file.name;
          img.style.width = "100px";
          img.style.height = "100px";
          img.style.objectFit = "cover";
          img.style.border = "1px solid #ddd";
          img.style.borderRadius = "5px";
          imageDiv.appendChild(img);
          selectedImagesContainer.appendChild(imageDiv);
        };
        reader.readAsDataURL(file);
      }
    });
  }

  
</script>

{% endblock extra_js %}

